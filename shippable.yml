language: python

python:
  - 2.7

env:
  global:
    - GAE_DIR=/tmp/gae
 
build:
  ci:
    - echo $GAE_DIR
    # - >
    #   test -e $GAE_DIR || 
    #   (mkdir -p $GAE_DIR && 
    #   wget https://storage.googleapis.com/appengine-sdks/featured/google_appengine_1.9.6.zip -q -O /tmp/gae.zip &&
    #   unzip /tmp/gae.zip -d $GAE_DIR)
    - mkdir -p $GAE_DIR
    - ls -la $GAE_DIR
    - ls -la /tmp
    - wget https://storage.googleapis.com/appengine-sdks/featured/google_appengine_1.9.6.zip -q -O /tmp/gae.zip
    - unzip /tmp/gae.zip -d $GAE_DIR)
    - pip install -r requirements.txt
    - mkdir -p shippable/testresults
    - mkdir -p shippable/codecoverage
    - mysql -e 'create database test;'
    - python manage.py test

on_success:
  - echo 'yay'
  # - echo "$GAE_PASSWORD" | $GAE_DIR/google_appengine/appcfg.py -e "$EMAIL" --passin update .
